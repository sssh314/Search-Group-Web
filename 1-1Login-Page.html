<!DOCTYPE html>
<html lang="ko">
<head>
    <script>
        function login() {
            const id = document.querySelector('#id').value;
            const pw = document.querySelector('#pw').value;

            // 로컬스토리지에서 user 배열 가져오기
            const users = JSON.parse(localStorage.getItem("users")) || [];

            if(id === "" || pw === "") {
                alert("로그인 실패: 입력되지 않은 항목이 있습니다.");
                return;
            }

            // 배열에서 id와 pw가 일치하는 사용자 찾기
            //u => u.id === id로 입력한 id와 배열의 id가 일치하는지 확인 
            const foundUser = users.find(u => u.id === id && u.pw === pw);

            if(foundUser) {
                // 로그인 성공하면 user_id, user_name 저장 (현재 로그인 상태)
                localStorage.setItem("user_id", foundUser.id);
                localStorage.setItem("user_name", foundUser.name);
                location.href = '2-1Search-Main.html';
            } else {
                alert("아이디 또는 비밀번호가 올바르지 않습니다.");
            }
        }
        function createID(){
            location.href = '1-2CreateID.html';
        }
    </script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>스터디 모임 플랫폼</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #212121;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 80vh;
  }
  .container{
    background-color: #171717;
    max-width: 300px;
    padding: 20px;
    border-radius: 20px;
  }
  .container input{
    border: 1px solid #444;
    background-color: #212121;
    border-radius: 20px;
    padding: 8px 10px;
    color: white;
    outline: none;
    width: 200px;
  }
  .container input:focus{
    border-color: #888;
  }
  .top{
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 0;
    
  }
  .top div{
    padding: 10px;
  }
  div {
    padding: 15px;
  }
  .buttons{
    padding: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .login-button button{
    background-color: #212121;
    color: white;
    border: none;
    padding: 10px 100px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: bold;
  }
  .create-button button{
    background-color: #171717;
    color: white;
    border: none;
    cursor: pointer;
    padding: 0;
    font-weight: bold;
    font-size: 12px;
  }
</style>
</head>
<body>
    <div class="container">
        <div class="top">
            <div>
                <input id="id" type="text" placeholder="Id">
            </div>
            <div>
                <input id="pw" type="password" placeholder="Password">
            </div>
        </div>
        <div class="buttons">
            <div class="login-button">
                <button onclick="login()">로그인</button>
            </div>
            <div class="create-button">
                <button onclick="createID()">회원가입</button>
            </div>
        </div>
    </div>
</body>
</html>